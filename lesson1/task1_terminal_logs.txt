vitaly@vitaly-MS-7C37:~$ script -a Документы/GB/BigData_Hadoop/lesson1/hw_lesson1_terminal_logs.txt
Скрипт запущен, файл — Документы/GB/BigData_Hadoop/lesson1/hw_lesson1_terminal_logs.txt
vitaly@vitaly-MS-7C37:~$ sudo apt-get update
[sudo] пароль для vitaly:
Сущ:1 http://repo.yandex.ru/yandex-browser/deb beta InRelease
Сущ:2 http://ru.archive.ubuntu.com/ubuntu focal InRelease
Сущ:3 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease
Сущ:4 http://security.ubuntu.com/ubuntu focal-security InRelease
Сущ:5 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease
Сущ:6 https://dl.google.com/linux/chrome/deb stable InRelease
Игн:7 https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 InRelease
Сущ:8 https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 Release
Чтение списков пакетов… Готово
vitaly@vitaly-MS-7C37:~$ sudo apt-get install \
>     ca-certificates \
>     curl \
>     gnupg \
>     lsb-release
Чтение списков пакетов… Готово
Построение дерева зависимостей
Чтение информации о состоянии… Готово
Уже установлен пакет lsb-release самой новой версии (11.1.0ubuntu2).
lsb-release помечен как установленный вручную.
Уже установлен пакет ca-certificates самой новой версии (20210119~20.04.2).
ca-certificates помечен как установленный вручную.
Уже установлен пакет gnupg самой новой версии (2.2.19-3ubuntu2.1).
gnupg помечен как установленный вручную.
Следующие пакеты устанавливались автоматически и больше не требуются:
  chromium-codecs-ffmpeg-extra gstreamer1.0-vaapi
  libgstreamer-plugins-bad1.0-0 libllvm11 libva-wayland2
Для их удаления используйте «sudo apt autoremove».
Следующие НОВЫЕ пакеты будут установлены:
  curl
Обновлено 0 пакетов, установлено 1 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
Необходимо скачать 161 kB архивов.
После данной операции объём занятого дискового пространства возрастёт на 412 kB.
Хотите продолжить? [Д/н] y
Пол:1 http://ru.archive.ubuntu.com/ubuntu focal-updates/main amd64 curl amd64 7.68.0-1ubuntu2.7 [161 kB]
Получено 161 kB за 1с (122 kB/s)
Выбор ранее не выбранного пакета curl.
(Чтение базы данных … на данный момент установлено 210083 файла и каталога.)
Подготовка к распаковке …/curl_7.68.0-1ubuntu2.7_amd64.deb …
Распаковывается curl (7.68.0-1ubuntu2.7) …
Настраивается пакет curl (7.68.0-1ubuntu2.7) …
Обрабатываются триггеры для man-db (2.9.1-1) …
vitaly@vitaly-MS-7C37:~$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
vitaly@vitaly-MS-7C37:~$ echo \
>   "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
>   $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
vitaly@vitaly-MS-7C37:~$ sudo apt-get update
Сущ:1 http://ru.archive.ubuntu.com/ubuntu focal InRelease
Сущ:2 http://repo.yandex.ru/yandex-browser/deb beta InRelease
Сущ:3 http://ru.archive.ubuntu.com/ubuntu focal-updates InRelease
Сущ:4 http://security.ubuntu.com/ubuntu focal-security InRelease
Сущ:5 http://ru.archive.ubuntu.com/ubuntu focal-backports InRelease
Пол:6 https://download.docker.com/linux/ubuntu focal InRelease [57,7 kB]
Сущ:7 https://dl.google.com/linux/chrome/deb stable InRelease
Игн:8 https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 InRelease
Пол:9 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [12,9 kB]
Сущ:10 https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 Release
Получено 70,6 kB за 2с (41,2 kB/s)
Чтение списков пакетов… Готово
vitaly@vitaly-MS-7C37:~$ sudo apt-get install docker-ce docker-ce-cli containerd.io
Чтение списков пакетов… Готово
Построение дерева зависимостей
Чтение информации о состоянии… Готово
Следующие пакеты устанавливались автоматически и больше не требуются:
  chromium-codecs-ffmpeg-extra gstreamer1.0-vaapi
  libgstreamer-plugins-bad1.0-0 libllvm11 libva-wayland2
Для их удаления используйте «sudo apt autoremove».
Будут установлены следующие дополнительные пакеты:
  docker-ce-rootless-extras docker-scan-plugin pigz slirp4netns
Предлагаемые пакеты:
  aufs-tools cgroupfs-mount | cgroup-lite
Следующие НОВЫЕ пакеты будут установлены:
  containerd.io docker-ce docker-ce-cli docker-ce-rootless-extras
  docker-scan-plugin pigz slirp4netns
Обновлено 0 пакетов, установлено 7 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
Необходимо скачать 95,3 MB архивов.
После данной операции объём занятого дискового пространства возрастёт на 402 MB.
Хотите продолжить? [Д/н] y
Пол:1 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 pigz amd64 2.4-1 [57,4 kB]
Пол:2 http://ru.archive.ubuntu.com/ubuntu focal/universe amd64 slirp4netns amd64 0.4.3-1 [74,3 kB]
Пол:3 https://download.docker.com/linux/ubuntu focal/stable amd64 containerd.io amd64 1.4.12-1 [23,7 MB]
Пол:4 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-cli amd64 5:20.10.11~3-0~ubuntu-focal [38,8 MB]
Пол:5 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce amd64 5:20.10.11~3-0~ubuntu-focal [21,2 MB]
Пол:6 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-ce-rootless-extras amd64 5:20.10.11~3-0~ubuntu-focal [7 920 kB]
Пол:7 https://download.docker.com/linux/ubuntu focal/stable amd64 docker-scan-plugin amd64 0.9.0~ubuntu-focal [3 518 kB]
Получено 95,3 MB за 38с (2 530 kB/s)
Выбор ранее не выбранного пакета pigz.
(Чтение базы данных … на данный момент установлено 210090 файлов и каталогов.)
Подготовка к распаковке …/0-pigz_2.4-1_amd64.deb …
Распаковывается pigz (2.4-1) …
Выбор ранее не выбранного пакета containerd.io.
Подготовка к распаковке …/1-containerd.io_1.4.12-1_amd64.deb …
Распаковывается containerd.io (1.4.12-1) …
Выбор ранее не выбранного пакета docker-ce-cli.
Подготовка к распаковке …/2-docker-ce-cli_5%3a20.10.11~3-0~ubuntu-focal_amd64.deb …
Распаковывается docker-ce-cli (5:20.10.11~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета docker-ce.
Подготовка к распаковке …/3-docker-ce_5%3a20.10.11~3-0~ubuntu-focal_amd64.deb …
Распаковывается docker-ce (5:20.10.11~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета docker-ce-rootless-extras.
Подготовка к распаковке …/4-docker-ce-rootless-extras_5%3a20.10.11~3-0~ubuntu-focal_amd64.deb …
Распаковывается docker-ce-rootless-extras (5:20.10.11~3-0~ubuntu-focal) …
Выбор ранее не выбранного пакета docker-scan-plugin.
Подготовка к распаковке …/5-docker-scan-plugin_0.9.0~ubuntu-focal_amd64.deb …
Распаковывается docker-scan-plugin (0.9.0~ubuntu-focal) …
Выбор ранее не выбранного пакета slirp4netns.
Подготовка к распаковке …/6-slirp4netns_0.4.3-1_amd64.deb …
Распаковывается slirp4netns (0.4.3-1) …
Настраивается пакет slirp4netns (0.4.3-1) …
Настраивается пакет docker-scan-plugin (0.9.0~ubuntu-focal) …
Настраивается пакет containerd.io (1.4.12-1) …
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Настраивается пакет docker-ce-cli (5:20.10.11~3-0~ubuntu-focal) …
Настраивается пакет pigz (2.4-1) …
Настраивается пакет docker-ce-rootless-extras (5:20.10.11~3-0~ubuntu-focal) …
Настраивается пакет docker-ce (5:20.10.11~3-0~ubuntu-focal) …
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /lib/systemd/system/docker.service.
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket → /lib/systemd/system/docker.socket.
Обрабатываются триггеры для man-db (2.9.1-1) …
Обрабатываются триггеры для systemd (245.4-4ubuntu3.13) …
vitaly@vitaly-MS-7C37:~$ sudo docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
2db29710123e: Pull complete
Digest: sha256:cc15c5b292d8525effc0f89cb299f1804f3a725c8d05e158653a563f15e4f685
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

vitaly@vitaly-MS-7C37:~$ sudo systemctl status docker
● docker.service - Docker Application Container Engine
     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset>
     Active: active (running) since Fri 2021-12-03 12:08:28 +08; 2min 41s ago
TriggeredBy: ● docker.socket
       Docs: https://docs.docker.com
   Main PID: 14857 (dockerd)
      Tasks: 22
     Memory: 32.5M
     CGroup: /system.slice/docker.service
             └─14857 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/con>

дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035872>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035877>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035983>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.116000>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.144521>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.164963>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.165050>
дек 03 12:08:28 vitaly-MS-7C37 systemd[1]: Started Docker Application Container>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.185013>
дек 03 12:09:02 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:09:02.343272>
...skipping...
~
~
● docker.service - Docker Application Container Engine
     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset>
     Active: active (running) since Fri 2021-12-03 12:08:28 +08; 2min 41s ago
TriggeredBy: ● docker.socket
       Docs: https://docs.docker.com
   Main PID: 14857 (dockerd)
      Tasks: 22
     Memory: 32.5M
     CGroup: /system.slice/docker.service
             └─14857 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/con>

дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035872>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035877>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.035983>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.116000>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.144521>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.164963>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.165050>
дек 03 12:08:28 vitaly-MS-7C37 systemd[1]: Started Docker Application Container>
дек 03 12:08:28 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:08:28.185013>
дек 03 12:09:02 vitaly-MS-7C37 dockerd[14857]: time="2021-12-03T12:09:02.343272>
~
vitaly@vitaly-MS-7C37:~$ sudo usermod -aG docker vitaly
vitaly@vitaly-MS-7C37:~$ su - vitaly
Пароль:
vitaly@vitaly-MS-7C37:~$ id
uid=1000(vitaly) gid=1000(vitaly) группы=1000(vitaly),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),120(lpadmin),131(lxd),132(sambashare),998(docker)
vitaly@vitaly-MS-7C37:~$ cd Документы/GB/docker-hadoop-master/
vitaly@vitaly-MS-7C37:~/Документы/GB/docker-hadoop-master$ docker-compose up -d

Команда «docker-compose» не найдена, но может быть установлена с помощью:

sudo snap install docker          # version 20.10.8, or
sudo apt  install docker-compose  # version 1.25.0-1

See 'snap info docker' for additional versions.

vitaly@vitaly-MS-7C37:~/Документы/GB/docker-hadoop-master$ cd
vitaly@vitaly-MS-7C37:~$  sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
[sudo] пароль для vitaly:
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   664  100   664    0     0    824      0 --:--:-- --:--:-- --:--:--   823
100 12.1M  100 12.1M    0     0  1765k      0  0:00:07  0:00:07 --:--:-- 2537k
vitaly@vitaly-MS-7C37:~$ sudo chmod +x /usr/local/bin/docker-compose
vitaly@vitaly-MS-7C37:~$ docker-compose --version
docker-compose version 1.29.2, build 5becea4c
vitaly@vitaly-MS-7C37:~$ cd Документы/GB/docker-hadoop-master/
vitaly@vitaly-MS-7C37:~/Документы/GB/docker-hadoop-master$ docker-compose up -d
Creating network "docker-hadoop-master_default" with the default driver
Creating volume "docker-hadoop-master_hadoop_namenode" with default driver
Creating volume "docker-hadoop-master_hadoop_datanode" with default driver
Creating volume "docker-hadoop-master_hadoop_historyserver" with default driver
Pulling namenode (bde2020/hadoop-namenode:2.0.0-hadoop3.2.1-java8)...
2.0.0-hadoop3.2.1-java8: Pulling from bde2020/hadoop-namenode
3192219afd04: Pull complete
7127a1d8cced: Pull complete
883a89599900: Pull complete
92329e81aec4: Extracting [===============================================>   ]  344.3MB/359.7MB
92329e81aec4: Downloading [================================================>  ]  350.6MB/359.7MBwnload complete
aa53513fe997: Download complete
8b1800105b98: Download complete
c3a84a3e49c8: Download complete                                                92329e81aec4: Pull complete
f373218fec59: Pull complete
aa53513fe997: Pull complete
8b1800105b98: Pull complete
c3a84a3e49c8: Pull complete
a65640a64a76: Pull complete
facffb3a6de3: Pull complete
c71a6df73788: Pull complete
73b8c0ccb707: Pull complete
Digest: sha256:51ad9293ec52083c5003ef0aaab00c3dd7d6335ddf495cc1257f97a272cab4c0
Status: Downloaded newer image for bde2020/hadoop-namenode:2.0.0-hadoop3.2.1-java8
Pulling datanode (bde2020/hadoop-datanode:2.0.0-hadoop3.2.1-java8)...
2.0.0-hadoop3.2.1-java8: Pulling from bde2020/hadoop-datanode
3192219afd04: Already exists
7127a1d8cced: Already exists
883a89599900: Already exists
77920a3e82af: Already exists
92329e81aec4: Already exists
f373218fec59: Already exists
aa53513fe997: Already exists
8b1800105b98: Already exists
c3a84a3e49c8: Already exists
a65640a64a76: Already exists
3ca2ec07878c: Pull complete
26c2dd45430e: Pull complete
13c9c87a46cb: Pull complete
Digest: sha256:ddf6e9ad55af4f73d2ccb6da31d9e3331ffb94d5f046126db4f40aa348d484bf
Status: Downloaded newer image for bde2020/hadoop-datanode:2.0.0-hadoop3.2.1-java8
Pulling resourcemanager (bde2020/hadoop-resourcemanager:2.0.0-hadoop3.2.1-java8)...
2.0.0-hadoop3.2.1-java8: Pulling from bde2020/hadoop-resourcemanager
3192219afd04: Already exists
7127a1d8cced: Already exists
883a89599900: Already exists
77920a3e82af: Already exists
92329e81aec4: Already exists
f373218fec59: Already exists
aa53513fe997: Already exists
8b1800105b98: Already exists
c3a84a3e49c8: Already exists
a65640a64a76: Already exists
b0d764123f3e: Pull complete
b04394ddb35d: Pull complete
Digest: sha256:91ca2afe86162c4ac91aee8c62071fc7c2a551a6d9354d4ad6a98b6099b589f0
Status: Downloaded newer image for bde2020/hadoop-resourcemanager:2.0.0-hadoop3.2.1-java8
Pulling nodemanager1 (bde2020/hadoop-nodemanager:2.0.0-hadoop3.2.1-java8)...
2.0.0-hadoop3.2.1-java8: Pulling from bde2020/hadoop-nodemanager
3192219afd04: Already exists
7127a1d8cced: Already exists
883a89599900: Already exists
77920a3e82af: Already exists
92329e81aec4: Already exists
f373218fec59: Already exists
aa53513fe997: Already exists
8b1800105b98: Already exists
c3a84a3e49c8: Already exists
a65640a64a76: Already exists
beaa171f32f6: Pull complete
50dda04de8a9: Pull complete
Digest: sha256:b5515b537a30468a00198610861e0228ef51110315e7df18025a3d0bbe0b0951
Status: Downloaded newer image for bde2020/hadoop-nodemanager:2.0.0-hadoop3.2.1-java8
Pulling historyserver (bde2020/hadoop-historyserver:2.0.0-hadoop3.2.1-java8)...
2.0.0-hadoop3.2.1-java8: Pulling from bde2020/hadoop-historyserver
3192219afd04: Already exists
7127a1d8cced: Already exists
883a89599900: Already exists
77920a3e82af: Already exists
92329e81aec4: Already exists
f373218fec59: Already exists
aa53513fe997: Already exists
8b1800105b98: Already exists
c3a84a3e49c8: Already exists
a65640a64a76: Already exists
b2dc88cebe05: Pull complete
13b908760168: Pull complete
0991d53828a1: Pull complete
Digest: sha256:ab2971d5f8c3384d1b950015985d0371603f09a64e530c1fdda09f0026f06fab
Status: Downloaded newer image for bde2020/hadoop-historyserver:2.0.0-hadoop3.2.1-java8
Creating historyserver   ... done
Creating nodemanager     ... done
Creating datanode        ... done
Creating resourcemanager ... done
Creating namenode        ... done
vitaly@vitaly-MS-7C37:~/Документы/GB/docker-hadoop-master$ docker kill $(docker ps -q)
3895a3053730
f560c11b9fde
8cbff776f141
568fec4003e9
3cb6c77529d9
vitaly@vitaly-MS-7C37:~/Документы/GB/docker-hadoop-master$ exit